syntax = "proto3";

package proto;

import "google/protobuf/timestamp.proto";

service ApiService {
  rpc CreateSession(CreateSessionReq) returns (CreateSessionResp) {}
  rpc ValidateSession(ValidateSessionReq) returns (ValidateSessionResp) {}
  rpc DeleteSession(DeleteSessionReq) returns (DeleteSessionResp) {}

  rpc StartGoogleLogin(StartGoogleLoginReq) returns (StartGoogleLoginResp) {}
  rpc HandleGoogleCallback(HandleGoogleCallbackReq) returns (HandleGoogleCallbackResp);
}

message Session {
  string token = 1;
}


message CreateSessionReq {
  string user_id = 1;
}

message CreateSessionResp {
    string token = 1;
}

message ValidateSessionReq {
  string token = 1;
}

message ValidateSessionResp {
  string user_id = 1;
}

message DeleteSessionReq {
  string token = 1;
}

message DeleteSessionResp { }

message StartGoogleLoginReq {
}
message StartGoogleLoginResp {
  string state = 1;
  string code_verifier = 2;
  string authorization_url = 3;
}

message HandleGoogleCallbackReq {
  string state = 1;
  string code = 2;
  string code_verifier = 3;
}

message HandleGoogleCallbackResp {
  string google_id = 1;
  string email = 2;
  string name = 3;
}
